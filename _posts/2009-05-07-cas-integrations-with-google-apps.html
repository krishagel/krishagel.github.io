---
layout: post
title: CAS Integrations with Google Apps
date: '2009-05-07T22:11:00.001-07:00'
author: Kris Hagel
tags:
- CAS
- Google Apps
- Documentation
modified_time: '2009-05-07T22:15:08.378-07:00'
thumbnail: http://2.bp.blogspot.com/_BBmDIqRhYWw/SgO_uvRS7BI/AAAAAAAAAxM/JneSOkkUY20/s72-c/Picture+5.png
blogger_id: tag:blogger.com,1999:blog-3730747668829960203.post-8813912064486964237
blogger_orig_url: http://blog.krishagel.com/2009/05/cas-integrations-with-google-apps.html
---

As a follow up to my previous posts of setting up a Central Authentication Server in your organization, and the associated documentation, I would also like to share with you the specific setup documentation I have written for setting up Google Apps with CAS.<br /><br />As in the other documentation, the changes that need to be made to XML files are displayed here as images.<br /><br /><ul><li><span style="font-size:85%;"><b>Google Apps - Single Sign On</b></span></li><ul><li><span style="font-size:85%;">These instructions have been taken from the CAS wiki at: <a href="http://www.google.com/url?q=http%3A%2F%2Fwww.ja-sig.org%2Fwiki%2Fdisplay%2FCASUM%2FSAML%2B2.0%2B%2528Google%2BAccounts%2BIntegration%2529&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdCNWRSfok2j3RQ7bSg6wf55ZS0MQ">http://www.ja-sig.org/wiki/display/CASUM/SAML+2.0+(Google+Accounts+Integration)</a></span></li><li><span style="font-size:85%;">First you need generate public and private keys for CAS &amp; Google to communicate.  These steps should be done while in the /usr/local/tomcat/webapps/cas/WEB-INF/classes directory:</span></li><ol><li><span style="font-size:85%;"><i><span style="color: rgb(0, 0, 255);">root@cas:/usr/local/tomcat/webapps/cas/WEB-INF/classes# openssl genrsa -out private.key 1024</span></i><br /></span> </li><li><span style="font-size:85%;"><i style="color: rgb(0, 0, 255);">root@cas:/usr/local/tomcat/webapps/cas/WEB-INF/classes# openssl rsa -pubout -in private.key -out public.key -inform PEM -outform DER</i><br /></span> </li><li><span style="font-size:85%;"><i style="color: rgb(0, 0, 255);">root@cas:/usr/local/tomcat/webapps/cas/WEB-INF/classes# openssl pkcs8 -topk8 -inform PER -outform DER -nocrypt -in private.key -out private.p8</i><br /></span> </li><li><span style="font-size:85%;"><i style="color: rgb(0, 0, 255);">root@cas:/usr/local/tomcat/webapps/cas/WEB-INF/classes# openssl req -new -x509 -key private.key -out x509.pem -days 365</i><br /></span> </li></ol><li><span style="font-size:85%;">Then you must add the following for CAS to recognize the Google SAML requests.  This is in WEB-INF/spring-configuration/argumentExtractors/Configuration.xml<br /><br /></span><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_BBmDIqRhYWw/SgO_uvRS7BI/AAAAAAAAAxM/JneSOkkUY20/s1600-h/Picture+5.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 213px;" src="http://2.bp.blogspot.com/_BBmDIqRhYWw/SgO_uvRS7BI/AAAAAAAAAxM/JneSOkkUY20/s400/Picture+5.png" alt="" id="BLOGGER_PHOTO_ID_5333317193420696594" border="0" /></a><br /></li><li><span style="font-size:85%;">The final step is to setup the Google Apps Single Sign-On information.  Necessary information is below, and you will also need the x509.pem file created earlier:</span></li><ul><li><span style="font-size:85%;">Check Enable Single Sign-on</span></li><li><span style="font-size:85%;">Sign-in page URL: https://yourCasServer/login</span></li><li><span style="font-size:85%;">Sign-out page URL: http://whateverServerYouWouldLike<br /></span></li><li><span style="font-size:85%;">Change password URL: http://whateverServerYouWouldLike</span></li><li><span style="font-size:85%;">Verification Certificate: This is the x509.pem file</span></li><li><span style="font-size:85%;">Check the use a domain specific issuer box.</span></li></ul></ul></ul>